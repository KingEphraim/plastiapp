<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Bulk Transactions</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='favcon.ico') }}">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://cdn.cardknox.com/ifields/2.14.2211.1101/ifields.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>

</head>

<body>
  {% include 'navbar.html' %}
  <div class="container">


    <h1>Process bulk transactions using a csv file to cardknox</h1>
    <form id="bulkform">
      <div class="form-floating mb-3">
        <input type="email" class="form-control" id="email" placeholder="name@example.com">
        <label for="floatingInput">Email</label>
      </div>
      <div class="form-floating mb-3">
        <input class="form-control" type="text" list="url" id="urldata" name="url" id="floatingurl"
          placeholder="Select url" />
        <label for="floatingCommand">API URL</label>
        <datalist id="url">
          <option value="https://x1.cardknox.com/gatewayjson"></option>
        </datalist>
      </div>
      <div class="mb-3">
        <label for="formFile" class="form-label">Create a CSV file. The first row of the file should contain all the
          required field names for a Cardknox transaction, such as xAmount, xCommand, xVersion, and xSoftwareName. Each
          subsequent row should contain a single transaction to be processed with the relevent transaction details.
          Note: This tool should not be used to process card numbers.</label>
        <input class="form-control" type="file" name="csv_file" id="bulkcsv">
      </div>
      <input class="btn btn-primary" type="submit" value="Upload" id="submit_button">
      <!-- Button trigger modal -->


      <!-- Modal -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="staticBackdropLabel">Credit cards?</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                id="ccdatacancel"></button>
            </div>
            <div class="modal-body" id="myInput">
              Does your csv contain raw credit cards?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="ccdatayes">Yes</button>
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal" id="ccdatano">No</button>
            </div>
          </div>
        </div>
      </div>
    </form>


    <div id="status"></div>

    <div id="toolbar">
      <button id="refreshbutton" class="btn btn-secondary">refresh</button>
      <button id="exportButton" class="btn btn-secondary">Export CSV</button>
    </div>
    
    <table  data-toggle="table" id="bulkresultstable" data-pagination="true" data-search="true" data-height="460"  data-show-export="true"data-toolbar="#toolbar"   data-show-columns="true">
      <thead>
        <tr>

        </tr>
      </thead>
    </table>

    
  </div>

  <script src="{{url_for('static', filename='bulk.js')}}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
  
</body>

</html>